From 74ac86af9337e449b7dcdea8c471a2f9a79a5e9a Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Sun, 28 Feb 2016 01:06:47 +0000
Subject: [PATCH 2/2] applets/tray: Fix default icon size so that first icon is
 always shown

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 imports/natray/na-tray.c           | 2 +-
 panel/applets/tray/TrayApplet.vala | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/imports/natray/na-tray.c b/imports/natray/na-tray.c
index ea24bbb..fb22536 100644
--- a/imports/natray/na-tray.c
+++ b/imports/natray/na-tray.c
@@ -28,7 +28,7 @@
 #include "na-tray.h"
 
 #define ICON_SPACING 1
-#define MIN_BOX_SIZE 3
+#define MIN_BOX_SIZE 24
 
 typedef struct
 {
diff --git a/panel/applets/tray/TrayApplet.vala b/panel/applets/tray/TrayApplet.vala
index aa45d4b..1a7219f 100644
--- a/panel/applets/tray/TrayApplet.vala
+++ b/panel/applets/tray/TrayApplet.vala
@@ -38,7 +38,7 @@ public class TrayApplet : Budgie.Applet
         box.vexpand = false;
         vexpand = false;
 
-        realize.connect_after(()=> {
+        map.connect_after(()=> {
             maybe_integrate_tray();
         });
 
@@ -118,6 +118,7 @@ public class TrayApplet : Budgie.Applet
         }
         win.queue_draw();
         tray.force_redraw();
+        this.queue_resize();
     }
 }
 
-- 
2.7.1

